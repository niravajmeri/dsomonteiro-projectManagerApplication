title US 208: Update Time Spent on Task in Report


Actor->Web Application:update time spent on task in Report
Web Application -> RestReportController : PUT {{server}}/projects/{id}/tasks/{id}/reports/{id}/update

note left of RestReportController
    body

    {"reportedTime" : 50.0,
    "taskCollaborator" : {
	    "projCollaborator" : {
		    "collaborator": {
			    "email" : "tc@mymail.com"
		    }}}}
end note

alt report does NOT exist in task
    RestReportController -> Web Application : ResponseEntity(HttpStatus.METHOD_NOT_ALLOWED)
else report exists in task
   RestReportController->TaskService: task: getTaskByTaskID(id)
   TaskService -> RestReportController: task
   RestReportController->Task: taskReports: getTaskReports()
   Task ->RestReportController: taskReports
   RestReportController->Task: updateReportedTime(time, taskCollab, reportindex)
   Task -> RestReportController: true
   RestReportController -> RestReportController: reportUpdated : taskReports.get(indexOfUpdatedReport)
   RestReportController -> RestReportController: reportUpdated.setDateOfUpdate(date)
   RestReportController->TaskService: saveTask(task)
   TaskService -> TaskRepository : saveTask(task)
   RestReportController -> Web Application: ResponseEntity(reportUpdated, HttpStatus.OK)
   Web Application -> Actor : report was updated
end




https://www.websequencediagrams.com/